# Generated by Chef

$DefaultNetstreamDriverCAFile <%= node[:logentries][:ssl_cert_location] %>/logentries.all.crt
$ActionSendStreamDriver gtls # use gtls netstream driver
$ActionSendStreamDriverMode 1 # require TLS
$ActionSendStreamDriverAuthMode x509/name # authenticate by hostname
$ActionSendStreamDriverPermittedPeer *.logentries.com


$ActionResumeRetryCount <%= node[:logentries][:resume_retry_count] %>
$ActionQueueType LinkedList # use asynchronous processing
$ActionQueueFileName <%= node[:logentries][:queue_file_name] %>
$ActionQueueSaveOnShutdown on
$ActionQueueSize <%= node[:logentries][:queue_size] %>
$ActionQueueMaxDiskSpace <%= node[:logentries][:queue_disk_space] %>
$ActionResumeInterval 10
$ActionQueueDiscardMark 97500
$ActionQueueHighWaterMark 80000
$ActionQueueCheckpointInterval 100
$ActionQueueTimeoutEnqueue 10
$ActionQueueDiscardSeverity 0


$template Logentries,"<%= get_log_key(node[:logentries][:log_name], node[:logentries][:host_name]) %> %HOSTNAME% %syslogtag%%msg%\n"
<%= node[:logentries][:syslog_selector] %> @@api.logentries.com:<%= node[:logentries][:port_number] %>;Logentries




